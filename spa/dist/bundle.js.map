{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "assets/app.js",
    "assets/modules/app.js",
    "assets/modules/collection.js",
    "assets/modules/request.js",
    "assets/modules/router.js",
    "assets/modules/sections.js",
    "node_modules/riot-observable/dist/observable.js",
    "node_modules/riot-route/index.js"
  ],
  "names": [],
  "mappings": "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;;;;;;kBAGa,M;;AAEf;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AC1CA;IACM,Q;AACL,mBAAY,GAAZ,EAAiB;AAAA;;AAChB,OAAK,GAAL,GAAW,GAAX;AACA,OAAK,QAAL,GAAgB,MAAM,IAAN,CAAW,SAAS,gBAAT,CAA0B,OAA1B,CAAX,EAA+C,GAA/C,CAAmD,gBAAQ;AAAE;AAC5E,OAAM,QAAQ,KAAK,OAAL,CAAa,KAA3B;AACA,OAAM,UAAU,SAAS,cAAT,CAAwB,KAAxB,CAAhB,CAF0E,CAE1B;AAChD,OAAI,QAAQ,EAAR,KAAe,MAAnB,EAA2B;AAC1B,YAAQ,SAAR,CAAkB,GAAlB,CAAsB,iBAAtB;AACA;AACD,UAAO,OAAP;AACA,GAPe,CAAhB;AAQA;;;;yBAEM,K,EAAO;AACb,QAAK,QAAL,CAAc,OAAd,CAAsB;AAAA,WAAW,MAAM,QAAN,CAAe,QAAQ,EAAvB,IAC/B,QAAQ,SAAR,CAAkB,MAAlB,CAAyB,iBAAzB,CAD+B,GAE/B,QAAQ,SAAR,CAAkB,GAAlB,CAAsB,iBAAtB,CAFoB;AAAA,IAAtB;AAGA;;;;;;kBAGa,Q;;;ACrBf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "/* eslint-env browser */\n\nimport App from './modules/app';\n\n(() => {\n\t'use strict';\n\tconst app = new App();\n\tapp.init();\n})();\n",
    "/* eslint-env browser */\n\nimport Collection from './collection';\nimport Request from './request';\nimport Router from './router';\nimport Sections from './sections';\n\nclass App {\n\tconstructor() {\n\t\tthis.collection = new Collection(this);\n\t\tthis.sections = new Sections(this);\n\t\tthis.router = new Router(this);\n\t\tthis.request = new Request();\n\t}\n\n\tinit() {\n\t\tthis.router.init();\n\t}\n\n\thandleError(error) {\n\t\tconst body = document.querySelector('body');\n\n\t\tbody.insertAdjacentHTML('afterbegin', `\n\t\t\t<section class=\"error\">\n\t\t\t\t<h2>Oh no!</h2>\n\t\t\t\t<p>Something went slightly amiss. Please try to refresh.</p>\n\t\t\t\t<p>${error}</p>\n\t\t\t</section>\n\t\t`);\n\n\t\tthis.router.hasError = true;\n\t}\n\n\tremoveError() {\n\t\tdocument.querySelector('.error').remove();\n\t\tthis.router.hasError = false;\n\t}\n}\n\nexport default App;\n",
    "/* eslint-env browser */\n\nclass Collection {\n\tconstructor(app) {\n\t\tthis.app = app;\n\t\tthis.apikey = 'JrLJKjKw';\n\t\tthis.collectionPresent = false;\n\t}\n\n\trequestArtwork(artwork) {\n\t\tif (!artwork && this.collectionPresent) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst request = artwork ? `https://www.rijksmuseum.nl/api/en/collection/${artwork}?key=${this.apikey}&format=json` : `https://www.rijksmuseum.nl/api/en/collection?key=${this.apikey}&format=json&ps=20`;\n\n\t\tconsole.log('requestArtwork()');\n\n\t\tthis.app.request.get(request)\n\t\t\t.then(response => response.json())\n\t\t\t.then(result => result.artObjects ? this.renderCollection(result.artObjects) : this.renderArtwork(result.artObject))\n\t\t\t.catch(err => this.app.handleError(err));\n\t}\n\n\trenderCollection(collection) {\n\t\tconst section = this.app.sections.sections.find(section => section.id === 'collection');\n\t\tsection.insertAdjacentHTML('beforeend', collection.reduce((allArt, artwork) => {\n\t\t\treturn allArt + `\n\t\t\t\t<article id=\"${artwork.objectNumber}\">\n\t\t\t\t\t<img src=\"${artwork.headerImage.url}\" alt=\"${artwork.longTitle}\" />\n\t\t\t\t\t<h3><a href=\"#collection/${artwork.objectNumber}\">${artwork.title}</a></h3>\n\t\t\t\t</article>\n\t\t\t`;\n\t\t}, ''));\n\n\t\tthis.collectionPresent = true;\n\t}\n\n\trenderArtwork(artwork) {\n\t\tconst article = document.querySelector(`#${artwork.objectNumber}`);\n\t\tarticle.insertAdjacentHTML('beforeend', `\n\t\t\t<section class=\"more-information\">\n\t\t\t\t<p>${artwork.description}</p>\n\t\t\t</section>\n\t\t`);\n\t}\n}\n\nexport default Collection;\n",
    "/* eslint-env browser */\n\nclass Request {\n\tget(url) {\n\t\treturn fetch(url);\n\t}\n}\n\nexport default Request;\n",
    "/* eslint-env browser */\nimport route from 'riot-route';\n\nclass Router {\n\tconstructor(app) {\n\t\tthis.app = app;\n\t\tthis.init = this.init.bind(this);\n\t\tthis.hasError = false;\n\t}\n\n\tinit() {\n\t\troute((route, artwork) => this.navigate(route, artwork));\n\t\troute.start(true);\n\t}\n\n\tnavigate(route, artwork) {\n\t\tif (this.hasError) {\n\t\t\tthis.app.removeError();\n\t\t}\n\n\t\tif (route === 'collection') {\n\t\t\tthis.app.collection.requestArtwork();\n\t\t}\n\n\t\tif (artwork) {\n\t\t\tthis.app.collection.requestArtwork(artwork);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.app.sections.toggle(route);\n\t}\n}\n\nexport default Router;\n\n// {\n// \t\t\tif (artwork) {\n// \t\t\t\tthis.app.sections.requestArtwork(artwork);\n// \t\t\t\treturn;\n// \t\t\t}\n\n// \t\t\tthis.app.sections.toggle(route);\n// \t\t}\n",
    "/* eslint-env browser */\nclass Sections {\n\tconstructor(app) {\n\t\tthis.app = app;\n\t\tthis.sections = Array.from(document.querySelectorAll('nav a')).map(link => { // eslint-disable-line no-undef\n\t\t\tconst route = link.dataset.route;\n\t\t\tconst element = document.getElementById(route); // eslint-disable-line no-undef\n\t\t\tif (element.id !== 'home') {\n\t\t\t\telement.classList.add('visually-hidden');\n\t\t\t}\n\t\t\treturn element;\n\t\t});\n\t}\n\n\ttoggle(route) {\n\t\tthis.sections.forEach(section => route.includes(section.id) ?\n\t\t\t\tsection.classList.remove('visually-hidden') :\n\t\t\t\tsection.classList.add('visually-hidden'));\n\t}\n}\n\nexport default Sections;\n",
    ";(function(window, undefined) {var observable = function(el) {\n\n  /**\n   * Extend the original object or create a new empty one\n   * @type { Object }\n   */\n\n  el = el || {}\n\n  /**\n   * Private variables\n   */\n  var callbacks = {},\n    slice = Array.prototype.slice\n\n  /**\n   * Public Api\n   */\n\n  // extend the el object adding the observable methods\n  Object.defineProperties(el, {\n    /**\n     * Listen to the given `event` ands\n     * execute the `callback` each time an event is triggered.\n     * @param  { String } event - event id\n     * @param  { Function } fn - callback function\n     * @returns { Object } el\n     */\n    on: {\n      value: function(event, fn) {\n        if (typeof fn == 'function')\n          (callbacks[event] = callbacks[event] || []).push(fn)\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Removes the given `event` listeners\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    off: {\n      value: function(event, fn) {\n        if (event == '*' && !fn) callbacks = {}\n        else {\n          if (fn) {\n            var arr = callbacks[event]\n            for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n              if (cb == fn) arr.splice(i--, 1)\n            }\n          } else delete callbacks[event]\n        }\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Listen to the given `event` and\n     * execute the `callback` at most once\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    one: {\n      value: function(event, fn) {\n        function on() {\n          el.off(event, on)\n          fn.apply(el, arguments)\n        }\n        return el.on(event, on)\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Execute all callback functions that listen to\n     * the given `event`\n     * @param   { String } event - event id\n     * @returns { Object } el\n     */\n    trigger: {\n      value: function(event) {\n\n        // getting the arguments\n        var arglen = arguments.length - 1,\n          args = new Array(arglen),\n          fns,\n          fn,\n          i\n\n        for (i = 0; i < arglen; i++) {\n          args[i] = arguments[i + 1] // skip first argument\n        }\n\n        fns = slice.call(callbacks[event] || [], 0)\n\n        for (i = 0; fn = fns[i]; ++i) {\n          fn.apply(el, args)\n        }\n\n        if (callbacks['*'] && event != '*')\n          el.trigger.apply(el, ['*', event].concat(args))\n\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    }\n  })\n\n  return el\n\n}\n  /* istanbul ignore next */\n  // support CommonJS, AMD & browser\n  if (typeof exports === 'object')\n    module.exports = observable\n  else if (typeof define === 'function' && define.amd)\n    define(function() { return observable })\n  else\n    window.observable = observable\n\n})(typeof window != 'undefined' ? window : undefined);",
    "'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar observable = _interopDefault(require('riot-observable'));\n\n/**\n * Simple client-side router\n * @module riot-route\n */\n\nvar RE_ORIGIN = /^.+?\\/\\/+[^\\/]+/;\nvar EVENT_LISTENER = 'EventListener';\nvar REMOVE_EVENT_LISTENER = 'remove' + EVENT_LISTENER;\nvar ADD_EVENT_LISTENER = 'add' + EVENT_LISTENER;\nvar HAS_ATTRIBUTE = 'hasAttribute';\nvar POPSTATE = 'popstate';\nvar HASHCHANGE = 'hashchange';\nvar TRIGGER = 'trigger';\nvar MAX_EMIT_STACK_LEVEL = 3;\nvar win = typeof window != 'undefined' && window;\nvar doc = typeof document != 'undefined' && document;\nvar hist = win && history;\nvar loc = win && (hist.location || win.location);\nvar prot = Router.prototype;\nvar clickEvent = doc && doc.ontouchstart ? 'touchstart' : 'click';\nvar central = observable();\n\nvar started = false;\nvar routeFound = false;\nvar debouncedEmit;\nvar base;\nvar current;\nvar parser;\nvar secondParser;\nvar emitStack = [];\nvar emitStackLevel = 0;\n\n/**\n * Default parser. You can replace it via router.parser method.\n * @param {string} path - current path (normalized)\n * @returns {array} array\n */\nfunction DEFAULT_PARSER(path) {\n  return path.split(/[/?#]/)\n}\n\n/**\n * Default parser (second). You can replace it via router.parser method.\n * @param {string} path - current path (normalized)\n * @param {string} filter - filter string (normalized)\n * @returns {array} array\n */\nfunction DEFAULT_SECOND_PARSER(path, filter) {\n  var f = filter\n    .replace(/\\?/g, '\\\\?')\n    .replace(/\\*/g, '([^/?#]+?)')\n    .replace(/\\.\\./, '.*');\n  var re = new RegExp((\"^\" + f + \"$\"));\n  var args = path.match(re);\n\n  if (args) { return args.slice(1) }\n}\n\n/**\n * Simple/cheap debounce implementation\n * @param   {function} fn - callback\n * @param   {number} delay - delay in seconds\n * @returns {function} debounced function\n */\nfunction debounce(fn, delay) {\n  var t;\n  return function () {\n    clearTimeout(t);\n    t = setTimeout(fn, delay);\n  }\n}\n\n/**\n * Set the window listeners to trigger the routes\n * @param {boolean} autoExec - see route.start\n */\nfunction start(autoExec) {\n  debouncedEmit = debounce(emit, 1);\n  win[ADD_EVENT_LISTENER](POPSTATE, debouncedEmit);\n  win[ADD_EVENT_LISTENER](HASHCHANGE, debouncedEmit);\n  doc[ADD_EVENT_LISTENER](clickEvent, click);\n  if (autoExec) { emit(true); }\n}\n\n/**\n * Router class\n */\nfunction Router() {\n  this.$ = [];\n  observable(this); // make it observable\n  central.on('stop', this.s.bind(this));\n  central.on('emit', this.e.bind(this));\n}\n\nfunction normalize(path) {\n  return path.replace(/^\\/|\\/$/, '')\n}\n\nfunction isString(str) {\n  return typeof str == 'string'\n}\n\n/**\n * Get the part after domain name\n * @param {string} href - fullpath\n * @returns {string} path from root\n */\nfunction getPathFromRoot(href) {\n  return (href || loc.href).replace(RE_ORIGIN, '')\n}\n\n/**\n * Get the part after base\n * @param {string} href - fullpath\n * @returns {string} path from base\n */\nfunction getPathFromBase(href) {\n  return base[0] === '#'\n    ? (href || loc.href || '').split(base)[1] || ''\n    : (loc ? getPathFromRoot(href) : href || '').replace(base, '')\n}\n\nfunction emit(force) {\n  // the stack is needed for redirections\n  var isRoot = emitStackLevel === 0;\n  if (MAX_EMIT_STACK_LEVEL <= emitStackLevel) { return }\n\n  emitStackLevel++;\n  emitStack.push(function() {\n    var path = getPathFromBase();\n    if (force || path !== current) {\n      central[TRIGGER]('emit', path);\n      current = path;\n    }\n  });\n  if (isRoot) {\n    var first;\n    while (first = emitStack.shift()) { first(); } // stack increses within this call\n    emitStackLevel = 0;\n  }\n}\n\nfunction click(e) {\n  if (\n    e.which !== 1 // not left click\n    || e.metaKey || e.ctrlKey || e.shiftKey // or meta keys\n    || e.defaultPrevented // or default prevented\n  ) { return }\n\n  var el = e.target;\n  while (el && el.nodeName !== 'A') { el = el.parentNode; }\n\n  if (\n    !el || el.nodeName !== 'A' // not A tag\n    || el[HAS_ATTRIBUTE]('download') // has download attr\n    || !el[HAS_ATTRIBUTE]('href') // has no href attr\n    || el.target && el.target !== '_self' // another window or frame\n    || el.href.indexOf(loc.href.match(RE_ORIGIN)[0]) === -1 // cross origin\n  ) { return }\n\n  if (el.href !== loc.href\n    && (\n      el.href.split('#')[0] === loc.href.split('#')[0] // internal jump\n      || base[0] !== '#' && getPathFromRoot(el.href).indexOf(base) !== 0 // outside of base\n      || base[0] === '#' && el.href.split(base)[0] !== loc.href.split(base)[0] // outside of #base\n      || !go(getPathFromBase(el.href), el.title || doc.title) // route not found\n    )) { return }\n\n  e.preventDefault();\n}\n\n/**\n * Go to the path\n * @param {string} path - destination path\n * @param {string} title - page title\n * @param {boolean} shouldReplace - use replaceState or pushState\n * @returns {boolean} - route not found flag\n */\nfunction go(path, title, shouldReplace) {\n  // Server-side usage: directly execute handlers for the path\n  if (!hist) { return central[TRIGGER]('emit', getPathFromBase(path)) }\n\n  path = base + normalize(path);\n  title = title || doc.title;\n  // browsers ignores the second parameter `title`\n  shouldReplace\n    ? hist.replaceState(null, title, path)\n    : hist.pushState(null, title, path);\n  // so we need to set it manually\n  doc.title = title;\n  routeFound = false;\n  emit();\n  return routeFound\n}\n\n/**\n * Go to path or set action\n * a single string:                go there\n * two strings:                    go there with setting a title\n * two strings and boolean:        replace history with setting a title\n * a single function:              set an action on the default route\n * a string/RegExp and a function: set an action on the route\n * @param {(string|function)} first - path / action / filter\n * @param {(string|RegExp|function)} second - title / action\n * @param {boolean} third - replace flag\n */\nprot.m = function(first, second, third) {\n  if (isString(first) && (!second || isString(second))) { go(first, second, third || false); }\n  else if (second) { this.r(first, second); }\n  else { this.r('@', first); }\n};\n\n/**\n * Stop routing\n */\nprot.s = function() {\n  this.off('*');\n  this.$ = [];\n};\n\n/**\n * Emit\n * @param {string} path - path\n */\nprot.e = function(path) {\n  this.$.concat('@').some(function(filter) {\n    var args = (filter === '@' ? parser : secondParser)(normalize(path), normalize(filter));\n    if (typeof args != 'undefined') {\n      this[TRIGGER].apply(null, [filter].concat(args));\n      return routeFound = true // exit from loop\n    }\n  }, this);\n};\n\n/**\n * Register route\n * @param {string} filter - filter for matching to url\n * @param {function} action - action to register\n */\nprot.r = function(filter, action) {\n  if (filter !== '@') {\n    filter = '/' + normalize(filter);\n    this.$.push(filter);\n  }\n  this.on(filter, action);\n};\n\nvar mainRouter = new Router();\nvar route = mainRouter.m.bind(mainRouter);\n\n/**\n * Create a sub router\n * @returns {function} the method of a new Router object\n */\nroute.create = function() {\n  var newSubRouter = new Router();\n  // assign sub-router's main method\n  var router = newSubRouter.m.bind(newSubRouter);\n  // stop only this sub-router\n  router.stop = newSubRouter.s.bind(newSubRouter);\n  return router\n};\n\n/**\n * Set the base of url\n * @param {(str|RegExp)} arg - a new base or '#' or '#!'\n */\nroute.base = function(arg) {\n  base = arg || '#';\n  current = getPathFromBase(); // recalculate current path\n};\n\n/** Exec routing right now **/\nroute.exec = function() {\n  emit(true);\n};\n\n/**\n * Replace the default router to yours\n * @param {function} fn - your parser function\n * @param {function} fn2 - your secondParser function\n */\nroute.parser = function(fn, fn2) {\n  if (!fn && !fn2) {\n    // reset parser for testing...\n    parser = DEFAULT_PARSER;\n    secondParser = DEFAULT_SECOND_PARSER;\n  }\n  if (fn) { parser = fn; }\n  if (fn2) { secondParser = fn2; }\n};\n\n/**\n * Helper function to get url query as an object\n * @returns {object} parsed query\n */\nroute.query = function() {\n  var q = {};\n  var href = loc.href || current;\n  href.replace(/[?&](.+?)=([^&]*)/g, function(_, k, v) { q[k] = v; });\n  return q\n};\n\n/** Stop routing **/\nroute.stop = function () {\n  if (started) {\n    if (win) {\n      win[REMOVE_EVENT_LISTENER](POPSTATE, debouncedEmit);\n      win[REMOVE_EVENT_LISTENER](HASHCHANGE, debouncedEmit);\n      doc[REMOVE_EVENT_LISTENER](clickEvent, click);\n    }\n    central[TRIGGER]('stop');\n    started = false;\n  }\n};\n\n/**\n * Start routing\n * @param {boolean} autoExec - automatically exec after starting if true\n */\nroute.start = function (autoExec) {\n  if (!started) {\n    if (win) {\n      if (document.readyState === 'complete') { start(autoExec); }\n      // the timeout is needed to solve\n      // a weird safari bug https://github.com/riot/route/issues/33\n      else { win[ADD_EVENT_LISTENER]('load', function() {\n        setTimeout(function() { start(autoExec); }, 1);\n      }); }\n    }\n    started = true;\n  }\n};\n\n/** Prepare the router **/\nroute.base();\nroute.parser();\n\nmodule.exports = route;\n"
  ]
}