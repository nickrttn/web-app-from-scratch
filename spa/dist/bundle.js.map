{
  "version": 3,
  "sources": [
    "node_modules/browser-pack/_prelude.js",
    "assets/app.js",
    "assets/modules/app.js",
    "assets/modules/article.js",
    "assets/modules/collection.js",
    "assets/modules/filter.js",
    "assets/modules/render.js",
    "assets/modules/request.js",
    "assets/modules/router.js",
    "assets/modules/scroll.js",
    "assets/modules/sections.js",
    "node_modules/lodash/_Symbol.js",
    "node_modules/lodash/_baseGetTag.js",
    "node_modules/lodash/_freeGlobal.js",
    "node_modules/lodash/_getRawTag.js",
    "node_modules/lodash/_objectToString.js",
    "node_modules/lodash/_root.js",
    "node_modules/lodash/debounce.js",
    "node_modules/lodash/isObject.js",
    "node_modules/lodash/isObjectLike.js",
    "node_modules/lodash/isSymbol.js",
    "node_modules/lodash/now.js",
    "node_modules/lodash/toNumber.js",
    "node_modules/riot-observable/dist/observable.js",
    "node_modules/riot-route/index.js"
  ],
  "names": [],
  "mappings": "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AAQ,SAAR,CAAkB,GAAlB,CAAsB,iBAAtB,CAFqB;AAAA,IAAtB;AAGA;;;;;;kBAGa,Q;;;ACtDf;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC5BA;AACA;AACA;AACA;AACA;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "/* eslint-env browser */\nimport App from './modules/app';\n\n(() => {\n\t'use strict';\n\tnew App();\n})();\n",
    "/* eslint-env browser */\nimport Collection from './collection';\nimport Request from './request';\nimport Router from './router';\nimport Sections from './sections';\nimport Scroll from './scroll';\nimport Filter from './filter';\n\nclass App {\n\tconstructor() {\n\t\tthis.sections = new Sections();\n\t\tthis.request = new Request(this);\n\t\tthis.scroll = new Scroll();\n\t\tthis.collection = new Collection(this);\n\t\tthis.router = new Router(this);\n\t\tthis.filter = new Filter();\n\t}\n\n\thandleError(error) {\n\t\tconst body = document.querySelector('body');\n\n\t\tconsole.error(error);\n\n\t\tbody.insertAdjacentHTML('afterbegin', `\n\t\t\t<section class=\"error\">\n\t\t\t\t<h2>Oh no!</h2>\n\t\t\t\t<p>Something went slightly amiss. Please try to refresh.</p>\n\t\t\t\t<p>${error}</p>\n\t\t\t</section>\n\t\t`);\n\n\t\tthis.router.hasError = true;\n\t}\n\n\tremoveError() {\n\t\tdocument.querySelector('.error').remove();\n\t\tthis.router.hasError = false;\n\t}\n}\n\nexport default App;\n",
    "/* eslint-env browser */\nimport Render from './render';\n\nclass Article extends Render {\n\tstatic render(element, collection) {\n\t\tconst art = collection;\n\t\tconst placeholder = '/assets/images/placeholder.jpg';\n\n\t\tif (Array.isArray(art)) {\n\t\t\tart.forEach(artwork => {\n\t\t\t\tartwork.objectNumber = artwork.objectNumber.replace(/\\./g, '');\n\t\t\t});\n\n\t\t\tconst articles = art.filter(artwork => !document.querySelector(`[data-object=${artwork.objectNumber}]`));\n\n\t\t\t// Insert an article tag after the collection section to render individual artwork in later.\n\t\t\tthis.renderTemplate(element, articles.reduce((allArt, artwork) => {\n\t\t\t\tconst {objectNumber, longTitle, webImage, title, links} = artwork;\n\t\t\t\treturn allArt + `<article class=\"visually-hidden\" data-fetched=\"false\" data-object=\"${objectNumber}\">\n\t\t\t\t\t\t<a href=\"#collection\" class=\"close\"><span>&times;</span></a>\n\t\t\t\t\t\t<img class=\"blur\" src=\"${placeholder}\" alt=\"${longTitle}\" data-guid=\"${webImage.guid}\" />\n\t\t\t\t\t\t<h2>${title}</h2>\n\t\t\t\t\t\t<div class=\"additional-information\">\n\t\t\t\t\t\t\t<p class=\"external-link\"><a href=\"${links.web}\">View on the Rijksmuseum website.</a></p>\n\t\t\t\t\t\t</div>\n\t\t\t\t</article>`;\n\t\t\t}, ''), 'beforeend');\n\t\t} else if (Object.keys(art).find(key => key === 'artObject')) {\n\t\t\tconst {objectNumber, longTitle, webImage, title, links} = art.artObject;\n\t\t\t// Insert an article tag after the collection section to render individual artwork in later.\n\t\t\tthis.renderTemplate(element, `\n\t\t\t\t<article data-fetched=\"false\" data-object=\"${objectNumber}\">\n\t\t\t\t\t\t<a href=\"#collection\" class=\"close\">&times;</a>\n\t\t\t\t\t\t<img class=\"blur\" src=\"${placeholder}\" alt=\"${longTitle}\" data-guid=\"${webImage.guid}\" />\n\t\t\t\t\t\t<h2>${title}</h2>\n\t\t\t\t\t\t<div class=\"additional-information\">\n\t\t\t\t\t\t\t<p class=\"external-link\"><a href=\"${links.web}\">View on the Rijksmuseum website.</a></p>\n\t\t\t\t\t\t</div>\n\t\t\t\t</article>`, 'beforeend');\n\t\t}\n\n\t\treturn collection;\n\t}\n\n\tstatic append(data) {\n\t\tconst object = data.artObject;\n\t\tconst page = data.artObjectPage;\n\t\tconst article = document.querySelector(`[data-object=\"${object.objectNumber}\"]`);\n\t\tconst content = article.querySelector('.additional-information');\n\n\t\tif (article.dataset.fetched === 'true') return; // eslint-disable-line curly\n\n\t\tsuper.renderTemplate(content, `\n\t\t\t\t<p class=\"meta\"><span class=\"meta-label\">Artist</span> <span class=\"meta-data\">${object.principalOrFirstMaker}</span></p>\n\t\t\t\t<p class=\"meta\"><span class=\"meta-label\">Year</span> <span class=\"meta-data\">${object.dating.year}</span></p>\n\t\t\t\t${page.plaqueDescription ? `<p>${page.plaqueDescription}</p>` : ''}\n\t\t\t\t<p>${object.label.description || object.description}</p>\n\t\t`, 'beforeend');\n\n\t\tarticle.dataset.fetched = 'true';\n\n\t\treturn data;\n\t}\n}\n\nexport default Article;\n",
    "/* eslint-env browser */\nimport Render from './render';\n\nclass Collection extends Render {\n\tconstructor(app) {\n\t\t// Initiate the parent class\n\t\tsuper();\n\n\t\tthis.app = app;\n\t\tthis.collectionNode = this.app.sections.sections.find(section => section.id === 'collection');\n\n\t\tthis.app.scroll.listen(\n\t\t\tthis.collectionNode,\n\t\t\tthis.app.request.fetchCollection,\n\t\t\t(window.innerHeight / 2)\n\t\t);\n\t}\n\n\t/**\n\t * [render Renders all of the fetched collection artworks into the collection element at once.]\n\t * @param  {[Array]} collection [Array of artworks from the Rijksmuseum API]\n\t * @return {[Array]}            [The unchanged Array of artworks to be used in a chained .then() call.]\n\t */\n\trender(collection) {\n\t\tconst placeholder = '/assets/images/placeholder.jpg';\n\n\t\tconsole.log(collection);\n\n\t\t// Insert all artworks into the collection section\n\t\tCollection.renderTemplate(this.collectionNode, collection.reduce((allArt, artwork) => {\n\t\t\tconst {longTitle, principalOrFirstMaker, headerImage, objectNumber, title, productionPlaces} = artwork;\n\n\t\t\t// Don't take multiple production places into account for filtering.\n\t\t\tlet place = productionPlaces[0];\n\n\t\t\treturn allArt + `\n\t\t\t\t<article data-artist=${principalOrFirstMaker.replace(/\\s/g, '')} ${place ? `data-place=\"${place}\"` : 'data-place=\"unknown\"'}>\n\t\t\t\t\t<img class=\"blur\" src=\"${placeholder}\" alt=\"${longTitle}\" data-guid=\"${headerImage.guid}\" />\n\t\t\t\t\t<div class=\"info\">\n\t\t\t\t\t\t<p>${principalOrFirstMaker}</p>\n\t\t\t\t\t\t<h3>${title}</h3>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a href=\"#collection/${objectNumber}\"></a>\n\t\t\t\t</article>`;\n\t\t}, ''), 'beforeend');\n\n\t\treturn collection;\n\t}\n}\n\nexport default Collection;\n",
    "/* eslint-env browser */\nimport Render from './render';\n\nclass Filter {\n\tconstructor() {\n\t\tthis.menu = document.querySelector('menu');\n\t\tthis.artists = [];\n\t\tthis.places = [];\n\t\tthis.menu.addEventListener('change', event => this.apply(event));\n\t}\n\n\tadd(data) {\n\t\tthis.prepareData(data);\n\n\t\tconst filters = {\n\t\t\tmaker: this.artists,\n\t\t\tplace: this.places\n\t\t};\n\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tRender.renderTemplate(this.menu.querySelector(`#${key}`), filters[key].reduce((list, current) => {\n\t\t\t\tconst exists = Boolean(document.querySelector(`[value=\"${current}\"]`));\n\t\t\t\treturn list + (exists ? '' : `<option value=\"${current.replace(/\\s/g, '')}\">${current}</option>`);\n\t\t\t}, ''), 'beforeend');\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tapply(event) {\n\t\tconst articles = Array.from(document.querySelectorAll('#collection article'));\n\t\tarticles.forEach(article => article.classList.remove('visually-hidden'));\n\n\t\tif (event.target.value === '') return; // eslint-disable-line curly\n\n\t\tconst articlesToHide = articles.filter(article => article.dataset[event.target.id] !== event.target.value);\n\t\tarticlesToHide.forEach(article => article.classList.add('visually-hidden'));\n\t}\n\n\tprepareData(data) {\n\t\tconst filters = {\n\t\t\tartists: data.map(artwork => artwork.principalOrFirstMaker),\n\t\t\tplaces: data.map(artwork => artwork.productionPlaces.length > 0 ? artwork.productionPlaces[0] : 'unknown')\n\t\t};\n\n\t\tObject.keys(filters).forEach(key => {\n\t\t\tthis[key] = [...this[key], ...filters[key]];\n\t\t\tthis[key] = this[key].filter((place, index, array) => array.indexOf(place) === index);\n\t\t});\n\t}\n}\n\nexport default Filter;\n",
    "/* eslint-env browser */\n\n/**\n * Render has both a static and a non-static implementation of the renderTemplate method,\n * because it is used by a static as well as an instantiated class.\n */\nclass Render {\n\tstatic renderTemplate(element, template, insert) {\n\t\telement.insertAdjacentHTML(insert, template);\n\t}\n\n\tstatic renderImages(data, selector) {\n\t\tif (Array.isArray(data)) {\n\t\t\tdata.forEach(object => renderImage(object));\n\t\t} else {\n\t\t\trenderImage(data);\n\t\t}\n\n\t\tfunction renderImage(object) {\n\t\t\t// There are potentially multiple images with the same data-guid.\n\t\t\tconst images = document.querySelectorAll(`#${selector} [data-guid=\"${object.guid}\"]`);\n\t\t\timages.forEach(image => {\n\t\t\t\timage.src = object.src;\n\t\t\t\timage.classList.remove('blur');\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nexport default Render;\n",
    "/* eslint-env browser */\nimport Article from './article';\nimport Render from './render';\n\nclass Request {\n\tconstructor(app) {\n\t\tthis.page = 1;\n\t\tthis.app = app;\n\t\tthis.apikey = 'JrLJKjKw';\n\t\tthis.baseURL = 'https://www.rijksmuseum.nl/api/en/collection';\n\t\tthis.fetching = false;\n\n\t\t// Create a new Web Worker\n\t\tthis.worker = new Worker('/assets/image-worker.js');\n\n\t\tthis.shouldFetchCollection = this.shouldFetchCollection.bind(this);\n\t\tthis.fetchCollection = this.fetchCollection.bind(this);\n\t}\n\n\tget(url) {\n\t\tthis.fetching = true;\n\t\treturn fetch(url).then(response => response.json());\n\t}\n\n\t/**\n\t * [shouldFetchCollection This function is only called when we route to #collection.\n\t * It checks if we have fetched API pages beyond the first and won't allow new pages to be fetched if we have.]\n\t * @return {[type]} [description]\n\t */\n\tshouldFetchCollection() {\n\t\tif (!(this.page > 1)) this.fetchCollection(); // eslint-disable-line curly\n\t}\n\n\tshouldFetchArtwork(artwork) {\n\t\t// Did we request this information before?\n\t\tconst article = document.querySelector(`#articles [data-object=\"${artwork}\"]`);\n\n\t\tif (!Boolean(article) || (Boolean(article) && article.dataset.fetched === 'false')) {\n\t\t\tthis.fetchArtwork(artwork, Boolean(article));\n\t\t}\n\n\t\treturn;\n\t}\n\n\t/**\n\t * [fetchCollection fetches and handles API data by sending it on to the collection and article classes.]\n\t * @return {[type]} [description]\n\t */\n\tfetchCollection() {\n\t\tif (this.fetching) return; // eslint-disable-line curly\n\t\tconst URL = `${this.baseURL}?key=${this.apikey}&format=json&ps=15&p=${this.page}`;\n\n\t\tthis.get(URL)\n\t\t\t.then(response => this.filterCollection(response))\n\t\t\t.then(result => this.app.collection.render(result))\n\t\t\t.then(data => Article.render(this.app.sections.find('articles'), data))\n\t\t\t.then(arr => this.app.filter.add(arr))\n\t\t\t.then(collection => this.fetchImages(collection))\n\t\t\t.then(arr => Article.renderImages(arr, 'collection'))\n\t\t\t.then(() => { this.fetching = false; }) // eslint-disable-line brace-style\n\t\t\t.catch(err => this.app.handleError(err));\n\n\t\t// Next time this function is called, request the next page.\n\t\tthis.page += 1;\n\t}\n\n\tfetchArtwork(artwork, article) {\n\t\tconst URL = `${this.baseURL}/${artwork}?key=${this.apikey}&format=json`;\n\n\t\tthis.get(URL)\n\t\t\t.then(data => article ? data : Article.render(this.app.sections.find('articles'), data))\n\t\t\t.then(data => Article.append(data))\n\t\t\t.then(data => this.fetchImages(data))\n\t\t\t.then(image => Article.renderImages(image, 'articles'))\n\t\t\t.then(() => { this.fetching = false; }) // eslint-disable-line brace-style\n\t\t\t.catch(err => this.app.handleError(err));\n\t}\n\n\tfetchImages(data) {\n\t\t// Pass the collection data on to the web worker\n\t\tthis.worker.postMessage(data);\n\n\t\treturn new Promise(resolve => {\n\t\t\t// Listen for a message event from the worker and set blob with its data.\n\t\t\tthis.worker.onmessage = event => {\n\t\t\t\tresolve(event.data);\n\t\t\t};\n\t\t});\n\t}\n\n\tfilterCollection(data) {\n\t\t// Only display objects that have images as well as header images\n\t\tconst filteredArtworks = data.artObjects.filter(object => object.hasImage && object.headerImage && object.webImage);\n\n\t\t// Remove any dots from the objectnumber as they mess with id-selectors\n\t\tfilteredArtworks.forEach(artwork => artwork.objectNumber.replace(/\\./g, ''));\n\n\t\treturn filteredArtworks;\n\t}\n}\n\nexport default Request;\n",
    "/* eslint-env browser */\nimport route from 'riot-route';\n\nclass Router {\n\tconstructor(app) {\n\t\tthis.app = app;\n\t\tthis.hasError = false;\n\n\t\troute((route, artwork) => this.navigate(route, artwork));\n\t\troute.start(true);\n\t}\n\n\tnavigate(route, artwork) {\n\t\t// remove errors if we previously rendered any\n\t\tif (this.hasError) {\n\t\t\tthis.app.removeError();\n\t\t}\n\n\t\tif (route === 'collection' && !artwork) {\n\t\t\tthis.app.request.shouldFetchCollection();\n\t\t}\n\n\t\tif (artwork) {\n\t\t\tthis.app.sections.toggle('articles', artwork);\n\t\t\tthis.app.request.shouldFetchArtwork(artwork);\n\t\t}\n\n\t\tthis.app.sections.toggle(route, artwork);\n\t}\n}\n\nexport default Router;\n",
    "/* eslint-env browser */\nimport { debounce } from 'lodash'; // eslint-disable-line object-curly-spacing\n\nclass Scroll {\n\tconstructor() {\n\t\tthis.listen = this.listen.bind(this);\n\t\tthis.trigger = debounce(this.trigger.bind(this), 250, {\n\t\t\tleading: true, trailing: false, maxWait: 250\n\t\t});\n\t}\n\n\tlisten(element, callback, offset = 0) {\n\t\telement.addEventListener('wheel', event => {\n\t\t\tthis.trigger(callback, element, offset);\n\t\t}, {passive: true});\n\t}\n\n\ttrigger(callback, element, offset) {\n\t\t// We need to know how far the right side of the #collection is from the right side of the viewport.\n\t\t// Calculate by subtracting the scroll position and the window width from the element width.\n\t\tconst scrollPosition = element.scrollWidth - element.offsetParent.scrollLeft - window.innerWidth;\n\n\t\tif (scrollPosition <= offset) {\n\t\t\tcallback();\n\t\t}\n\t}\n}\n\nexport default Scroll;\n",
    "/* eslint-env browser */\nclass Sections {\n\tconstructor() {\n\t\tthis.sections = Array.from(document.querySelectorAll('nav a')).map(link => {\n\t\t\tconst route = link.dataset.route;\n\t\t\tconst element = document.getElementById(route);\n\t\t\tif (element.id !== 'home') {\n\t\t\t\telement.classList.add('visually-hidden');\n\t\t\t}\n\t\t\treturn element;\n\t\t});\n\n\t\t// The articles section is not in the navigation but I need it in the sections Array regardlessly.\n\t\tthis.sections.push(document.querySelector('#articles'));\n\t}\n\n\tfind(id) {\n\t\treturn this.sections.find(section => section.id === id);\n\t}\n\n\ttoggle(route, artwork) {\n\t\tif (!route) return; // eslint-disable-line curly\n\n\t\tif (artwork) {\n\t\t\tthis.toggleArtwork(artwork);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggleSection(route);\n\t}\n\n\ttoggleSection(route) {\n\t\tthis.sections.forEach(section => route.includes(section.id) ?\n\t\t\tsection.classList.remove('visually-hidden') :\n\t\t\tsection.classList.add('visually-hidden'));\n\t}\n\n\ttoggleArtwork(artwork) {\n\t\tconst articlesSection = this.sections.find(section => section.id === 'articles');\n\t\tconst articles = articlesSection.querySelectorAll('article');\n\n\t\t// Toggle the individual article\n\t\tarticles.forEach(article => article.dataset.object === artwork ?\n\t\t\tarticle.classList.remove('visually-hidden') :\n\t\t\tarticle.classList.add('visually-hidden')\n\t\t);\n\n\t\t// Toggle the articles section\n\t\tthis.sections.forEach(section => section.id === 'articles' ?\n\t\t\tsection.classList.remove('visually-hidden') :\n\t\t\tsection.classList.add('visually-hidden'));\n\t}\n}\n\nexport default Sections;\n",
    "var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n",
    "var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n",
    "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n",
    "var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n",
    "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n",
    "var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n",
    "var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n",
    "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n",
    "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n",
    "var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n",
    "var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n",
    "var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n",
    ";(function(window, undefined) {var observable = function(el) {\n\n  /**\n   * Extend the original object or create a new empty one\n   * @type { Object }\n   */\n\n  el = el || {}\n\n  /**\n   * Private variables\n   */\n  var callbacks = {},\n    slice = Array.prototype.slice\n\n  /**\n   * Public Api\n   */\n\n  // extend the el object adding the observable methods\n  Object.defineProperties(el, {\n    /**\n     * Listen to the given `event` ands\n     * execute the `callback` each time an event is triggered.\n     * @param  { String } event - event id\n     * @param  { Function } fn - callback function\n     * @returns { Object } el\n     */\n    on: {\n      value: function(event, fn) {\n        if (typeof fn == 'function')\n          (callbacks[event] = callbacks[event] || []).push(fn)\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Removes the given `event` listeners\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    off: {\n      value: function(event, fn) {\n        if (event == '*' && !fn) callbacks = {}\n        else {\n          if (fn) {\n            var arr = callbacks[event]\n            for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n              if (cb == fn) arr.splice(i--, 1)\n            }\n          } else delete callbacks[event]\n        }\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Listen to the given `event` and\n     * execute the `callback` at most once\n     * @param   { String } event - event id\n     * @param   { Function } fn - callback function\n     * @returns { Object } el\n     */\n    one: {\n      value: function(event, fn) {\n        function on() {\n          el.off(event, on)\n          fn.apply(el, arguments)\n        }\n        return el.on(event, on)\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    },\n\n    /**\n     * Execute all callback functions that listen to\n     * the given `event`\n     * @param   { String } event - event id\n     * @returns { Object } el\n     */\n    trigger: {\n      value: function(event) {\n\n        // getting the arguments\n        var arglen = arguments.length - 1,\n          args = new Array(arglen),\n          fns,\n          fn,\n          i\n\n        for (i = 0; i < arglen; i++) {\n          args[i] = arguments[i + 1] // skip first argument\n        }\n\n        fns = slice.call(callbacks[event] || [], 0)\n\n        for (i = 0; fn = fns[i]; ++i) {\n          fn.apply(el, args)\n        }\n\n        if (callbacks['*'] && event != '*')\n          el.trigger.apply(el, ['*', event].concat(args))\n\n        return el\n      },\n      enumerable: false,\n      writable: false,\n      configurable: false\n    }\n  })\n\n  return el\n\n}\n  /* istanbul ignore next */\n  // support CommonJS, AMD & browser\n  if (typeof exports === 'object')\n    module.exports = observable\n  else if (typeof define === 'function' && define.amd)\n    define(function() { return observable })\n  else\n    window.observable = observable\n\n})(typeof window != 'undefined' ? window : undefined);",
    "'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar observable = _interopDefault(require('riot-observable'));\n\n/**\n * Simple client-side router\n * @module riot-route\n */\n\nvar RE_ORIGIN = /^.+?\\/\\/+[^\\/]+/;\nvar EVENT_LISTENER = 'EventListener';\nvar REMOVE_EVENT_LISTENER = 'remove' + EVENT_LISTENER;\nvar ADD_EVENT_LISTENER = 'add' + EVENT_LISTENER;\nvar HAS_ATTRIBUTE = 'hasAttribute';\nvar POPSTATE = 'popstate';\nvar HASHCHANGE = 'hashchange';\nvar TRIGGER = 'trigger';\nvar MAX_EMIT_STACK_LEVEL = 3;\nvar win = typeof window != 'undefined' && window;\nvar doc = typeof document != 'undefined' && document;\nvar hist = win && history;\nvar loc = win && (hist.location || win.location);\nvar prot = Router.prototype;\nvar clickEvent = doc && doc.ontouchstart ? 'touchstart' : 'click';\nvar central = observable();\n\nvar started = false;\nvar routeFound = false;\nvar debouncedEmit;\nvar base;\nvar current;\nvar parser;\nvar secondParser;\nvar emitStack = [];\nvar emitStackLevel = 0;\n\n/**\n * Default parser. You can replace it via router.parser method.\n * @param {string} path - current path (normalized)\n * @returns {array} array\n */\nfunction DEFAULT_PARSER(path) {\n  return path.split(/[/?#]/)\n}\n\n/**\n * Default parser (second). You can replace it via router.parser method.\n * @param {string} path - current path (normalized)\n * @param {string} filter - filter string (normalized)\n * @returns {array} array\n */\nfunction DEFAULT_SECOND_PARSER(path, filter) {\n  var f = filter\n    .replace(/\\?/g, '\\\\?')\n    .replace(/\\*/g, '([^/?#]+?)')\n    .replace(/\\.\\./, '.*');\n  var re = new RegExp((\"^\" + f + \"$\"));\n  var args = path.match(re);\n\n  if (args) { return args.slice(1) }\n}\n\n/**\n * Simple/cheap debounce implementation\n * @param   {function} fn - callback\n * @param   {number} delay - delay in seconds\n * @returns {function} debounced function\n */\nfunction debounce(fn, delay) {\n  var t;\n  return function () {\n    clearTimeout(t);\n    t = setTimeout(fn, delay);\n  }\n}\n\n/**\n * Set the window listeners to trigger the routes\n * @param {boolean} autoExec - see route.start\n */\nfunction start(autoExec) {\n  debouncedEmit = debounce(emit, 1);\n  win[ADD_EVENT_LISTENER](POPSTATE, debouncedEmit);\n  win[ADD_EVENT_LISTENER](HASHCHANGE, debouncedEmit);\n  doc[ADD_EVENT_LISTENER](clickEvent, click);\n  if (autoExec) { emit(true); }\n}\n\n/**\n * Router class\n */\nfunction Router() {\n  this.$ = [];\n  observable(this); // make it observable\n  central.on('stop', this.s.bind(this));\n  central.on('emit', this.e.bind(this));\n}\n\nfunction normalize(path) {\n  return path.replace(/^\\/|\\/$/, '')\n}\n\nfunction isString(str) {\n  return typeof str == 'string'\n}\n\n/**\n * Get the part after domain name\n * @param {string} href - fullpath\n * @returns {string} path from root\n */\nfunction getPathFromRoot(href) {\n  return (href || loc.href).replace(RE_ORIGIN, '')\n}\n\n/**\n * Get the part after base\n * @param {string} href - fullpath\n * @returns {string} path from base\n */\nfunction getPathFromBase(href) {\n  return base[0] === '#'\n    ? (href || loc.href || '').split(base)[1] || ''\n    : (loc ? getPathFromRoot(href) : href || '').replace(base, '')\n}\n\nfunction emit(force) {\n  // the stack is needed for redirections\n  var isRoot = emitStackLevel === 0;\n  if (MAX_EMIT_STACK_LEVEL <= emitStackLevel) { return }\n\n  emitStackLevel++;\n  emitStack.push(function() {\n    var path = getPathFromBase();\n    if (force || path !== current) {\n      central[TRIGGER]('emit', path);\n      current = path;\n    }\n  });\n  if (isRoot) {\n    var first;\n    while (first = emitStack.shift()) { first(); } // stack increses within this call\n    emitStackLevel = 0;\n  }\n}\n\nfunction click(e) {\n  if (\n    e.which !== 1 // not left click\n    || e.metaKey || e.ctrlKey || e.shiftKey // or meta keys\n    || e.defaultPrevented // or default prevented\n  ) { return }\n\n  var el = e.target;\n  while (el && el.nodeName !== 'A') { el = el.parentNode; }\n\n  if (\n    !el || el.nodeName !== 'A' // not A tag\n    || el[HAS_ATTRIBUTE]('download') // has download attr\n    || !el[HAS_ATTRIBUTE]('href') // has no href attr\n    || el.target && el.target !== '_self' // another window or frame\n    || el.href.indexOf(loc.href.match(RE_ORIGIN)[0]) === -1 // cross origin\n  ) { return }\n\n  if (el.href !== loc.href\n    && (\n      el.href.split('#')[0] === loc.href.split('#')[0] // internal jump\n      || base[0] !== '#' && getPathFromRoot(el.href).indexOf(base) !== 0 // outside of base\n      || base[0] === '#' && el.href.split(base)[0] !== loc.href.split(base)[0] // outside of #base\n      || !go(getPathFromBase(el.href), el.title || doc.title) // route not found\n    )) { return }\n\n  e.preventDefault();\n}\n\n/**\n * Go to the path\n * @param {string} path - destination path\n * @param {string} title - page title\n * @param {boolean} shouldReplace - use replaceState or pushState\n * @returns {boolean} - route not found flag\n */\nfunction go(path, title, shouldReplace) {\n  // Server-side usage: directly execute handlers for the path\n  if (!hist) { return central[TRIGGER]('emit', getPathFromBase(path)) }\n\n  path = base + normalize(path);\n  title = title || doc.title;\n  // browsers ignores the second parameter `title`\n  shouldReplace\n    ? hist.replaceState(null, title, path)\n    : hist.pushState(null, title, path);\n  // so we need to set it manually\n  doc.title = title;\n  routeFound = false;\n  emit();\n  return routeFound\n}\n\n/**\n * Go to path or set action\n * a single string:                go there\n * two strings:                    go there with setting a title\n * two strings and boolean:        replace history with setting a title\n * a single function:              set an action on the default route\n * a string/RegExp and a function: set an action on the route\n * @param {(string|function)} first - path / action / filter\n * @param {(string|RegExp|function)} second - title / action\n * @param {boolean} third - replace flag\n */\nprot.m = function(first, second, third) {\n  if (isString(first) && (!second || isString(second))) { go(first, second, third || false); }\n  else if (second) { this.r(first, second); }\n  else { this.r('@', first); }\n};\n\n/**\n * Stop routing\n */\nprot.s = function() {\n  this.off('*');\n  this.$ = [];\n};\n\n/**\n * Emit\n * @param {string} path - path\n */\nprot.e = function(path) {\n  this.$.concat('@').some(function(filter) {\n    var args = (filter === '@' ? parser : secondParser)(normalize(path), normalize(filter));\n    if (typeof args != 'undefined') {\n      this[TRIGGER].apply(null, [filter].concat(args));\n      return routeFound = true // exit from loop\n    }\n  }, this);\n};\n\n/**\n * Register route\n * @param {string} filter - filter for matching to url\n * @param {function} action - action to register\n */\nprot.r = function(filter, action) {\n  if (filter !== '@') {\n    filter = '/' + normalize(filter);\n    this.$.push(filter);\n  }\n  this.on(filter, action);\n};\n\nvar mainRouter = new Router();\nvar route = mainRouter.m.bind(mainRouter);\n\n/**\n * Create a sub router\n * @returns {function} the method of a new Router object\n */\nroute.create = function() {\n  var newSubRouter = new Router();\n  // assign sub-router's main method\n  var router = newSubRouter.m.bind(newSubRouter);\n  // stop only this sub-router\n  router.stop = newSubRouter.s.bind(newSubRouter);\n  return router\n};\n\n/**\n * Set the base of url\n * @param {(str|RegExp)} arg - a new base or '#' or '#!'\n */\nroute.base = function(arg) {\n  base = arg || '#';\n  current = getPathFromBase(); // recalculate current path\n};\n\n/** Exec routing right now **/\nroute.exec = function() {\n  emit(true);\n};\n\n/**\n * Replace the default router to yours\n * @param {function} fn - your parser function\n * @param {function} fn2 - your secondParser function\n */\nroute.parser = function(fn, fn2) {\n  if (!fn && !fn2) {\n    // reset parser for testing...\n    parser = DEFAULT_PARSER;\n    secondParser = DEFAULT_SECOND_PARSER;\n  }\n  if (fn) { parser = fn; }\n  if (fn2) { secondParser = fn2; }\n};\n\n/**\n * Helper function to get url query as an object\n * @returns {object} parsed query\n */\nroute.query = function() {\n  var q = {};\n  var href = loc.href || current;\n  href.replace(/[?&](.+?)=([^&]*)/g, function(_, k, v) { q[k] = v; });\n  return q\n};\n\n/** Stop routing **/\nroute.stop = function () {\n  if (started) {\n    if (win) {\n      win[REMOVE_EVENT_LISTENER](POPSTATE, debouncedEmit);\n      win[REMOVE_EVENT_LISTENER](HASHCHANGE, debouncedEmit);\n      doc[REMOVE_EVENT_LISTENER](clickEvent, click);\n    }\n    central[TRIGGER]('stop');\n    started = false;\n  }\n};\n\n/**\n * Start routing\n * @param {boolean} autoExec - automatically exec after starting if true\n */\nroute.start = function (autoExec) {\n  if (!started) {\n    if (win) {\n      if (document.readyState === 'complete') { start(autoExec); }\n      // the timeout is needed to solve\n      // a weird safari bug https://github.com/riot/route/issues/33\n      else { win[ADD_EVENT_LISTENER]('load', function() {\n        setTimeout(function() { start(autoExec); }, 1);\n      }); }\n    }\n    started = true;\n  }\n};\n\n/** Prepare the router **/\nroute.base();\nroute.parser();\n\nmodule.exports = route;\n"
  ]
}